@if (product(); as product) {
	<div class="product-layout">
		<!-- Image slider -->
		<div class="product-images">
			<app-image-slider [productImages]="product.imageList ?? []" />
		</div>

		<!-- Product details -->
		<div class="product-details">
			<div class="article-header">
				<h2>{{ product.name }}</h2>
				<mat-card-subtitle>{{ product.subCategory }}, Sports Shoes</mat-card-subtitle>
			</div>

			<div class="article-price">
				<h3 class="original-price">{{ originalPrice() | number: '1.2-2' }}€</h3>
				<h2 class="current-price">{{ product.price }}€</h2>
			</div>

			<!-- Variant thumbnails -->
			@if (similarProducts().length > 0) {
				<div class="variant-selection">
					@for (variant of similarProducts(); track variant.modelNo; let i = $index) {
						<a
							class="variant-image"
							[class.active]="activeVariantIndex() === i"
							(click)="variantSelect(i, variant.modelNo!)"
						>
							<img
								[ngSrc]="variant.imageList?.[0] ?? ''"
								[alt]="variant.name"
								width="60"
								height="60"
							/>
						</a>
					}
				</div>
			}

			<!-- Size selector (cnc web component) -->
			<cnc-size-selector [product]="product" (sizeSelected)="sizeSelected($any($event))" />

			<!-- Cart + favorite buttons -->
			<div class="button-row">
				<button mat-flat-button type="button" class="primary-button add-to-cart-btn" (click)="addToCart()">
					Add to cart
				</button>
				<button mat-mini-fab type="button" class="favorite-btn">
					<mat-icon>favorite_border</mat-icon>
				</button>
			</div>

			<!-- Shipping info -->
			<mat-list role="list">
				<mat-list-item role="listitem">
					<mat-icon class="done-icon">done</mat-icon> Free store collection and returns
				</mat-list-item>
				<mat-list-item role="listitem">
					<mat-icon class="done-icon">done</mat-icon> Free home delivery from 80 €
				</mat-list-item>
				<mat-list-item role="listitem">
					<mat-icon class="done-icon">done</mat-icon> Same day pick up
				</mat-list-item>
			</mat-list>

			<!-- Check availability card -->
			<mat-card class="availability-card">
				<h2>Check branch Availability</h2>
				<h3>Find your favourite shoe in your nearest shop now.</h3>
				<p>
					Note: Due to regional lockdowns &amp; store closures only limited availability.
					Check out the iRun shop near you.
				</p>
				<button
					mat-flat-button
					type="button"
					class="availability-btn"
					(click)="checkAvailability()"
				>
					<mat-icon fontSet="material-icons-outlined" class="availability-icon"
						>room</mat-icon
					>
					<span class="availability-label">Check availability in branch nearby</span>
				</button>
			</mat-card>

			<!-- Tags -->
			<mat-chip-set aria-label="Shoes selection">
				<mat-chip class="chip">Running</mat-chip>
				<mat-chip class="chip">Gym</mat-chip>
				<mat-chip class="chip">Outdoor</mat-chip>
				<mat-chip class="chip">Waterproof</mat-chip>
				<mat-chip class="chip">Unisex</mat-chip>
				<mat-chip class="chip">GEL® elements</mat-chip>
			</mat-chip-set>

			<!-- Accordion -->
			<mat-accordion>
				<mat-expansion-panel>
					<mat-expansion-panel-header>
						<mat-panel-title>Product Description</mat-panel-title>
					</mat-expansion-panel-header>
					<p>- Neutral shoes, the all-rounder</p>
					<p>- Suitable for normal sproners</p>
					<p>- Ideal for street &amp; park</p>
					<p>
						- Thanks to the GORE-TEX membrane, the shoe is breathable, waterproof and
						windproof
					</p>
					<p>- Unisex specific fit</p>
					<p>- GORE-TEX membrane</p>
					<p>- Waterproof</p>
					<p>- Windproof</p>
					<p>- Breathable</p>
					<p>- FlyteFoam™</p>
					<p>- GEL® elements</p>
				</mat-expansion-panel>

				<mat-expansion-panel>
					<mat-expansion-panel-header>
						<mat-panel-title>Reviews</mat-panel-title>
						<mat-panel-description>
							<mat-icon class="star-icon">star</mat-icon>
							<mat-icon class="star-icon">star</mat-icon>
							<mat-icon class="star-icon">star</mat-icon>
							<mat-icon class="star-icon">star</mat-icon>
							<mat-icon class="star-icon">star_half</mat-icon>
						</mat-panel-description>
					</mat-expansion-panel-header>
					<p>Customer reviews here!!</p>
				</mat-expansion-panel>
			</mat-accordion>
		</div>
	</div>
}
