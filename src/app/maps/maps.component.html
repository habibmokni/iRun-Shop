<div style="text-align: center;">
  <google-map #maps
    [options]="options"
    [height]="mapHeight()"
    [width]="mapWidth()"
    >
    <map-marker [position]="currentLocation" [icon]="icon"></map-marker>
    @for (store of storeList| async; track store; let i = $index) {
      <map-marker
        #marker="mapMarker"
        [position]="storeLocations[i]"
        (mapClick)="openInfoWindow(marker,store,$event)">
      </map-marker>
    }
    @if (userService.user) {
      <map-info-window>
        <h2>{{this.currentStore.name}}</h2>
        <p>{{this.currentStore.address}}</p>
        <button mat-raised-button color="primary" (click)="onSelectStore(this.currentStore)">Select</button>
        <button mat-raised-button color="accent" (click)="onGetDirections(this.currentStore.location)" >Directions</button>
      </map-info-window>
    }
    <map-marker [position]="currentUserLocation"></map-marker>
    @if ((directionsResults$ | async); as directionsResults) {
      <map-directions-renderer
      [directions]="directionsResults"></map-directions-renderer>
    }
  </google-map>
  <button mat-raised-button class="button" (click)="onGetCurrentLocation()">Stores Nearby</button>
</div>
